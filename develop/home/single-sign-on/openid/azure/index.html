
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://genestack.github.io/documentation/develop/home/single-sign-on/openid/azure/">
      
      
        <link rel="prev" href="../../sso/">
      
      
        <link rel="next" href="../google/">
      
      
      <link rel="icon" href="../../../../assets/favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.34">
    
    
      
        <title>Microsoft Azure - Open Data Manager Administrator Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../assets/stylesheets/main.35f28582.min.css">
      
        
        <link rel="stylesheet" href="../../../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="custom">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#azure-ad-setup" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../.." title="Open Data Manager Administrator Documentation" class="md-header__button md-logo" aria-label="Open Data Manager Administrator Documentation" data-md-component="logo">
      
  <img src="../../../../assets/logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Open Data Manager Administrator Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Microsoft Azure
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../../.." class="md-tabs__link">
          
  
    
  
  Home

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../.." title="Open Data Manager Administrator Documentation" class="md-nav__button md-logo" aria-label="Open Data Manager Administrator Documentation" data-md-component="logo">
      
  <img src="../../../../assets/logo.svg" alt="logo">

    </a>
    Open Data Manager Administrator Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../../.." class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    Home
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_1" id="__nav_1_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Home
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_2" >
        
          
          <label class="md-nav__link" for="__nav_1_2" id="__nav_1_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Requirements
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_2">
            <span class="md-nav__icon md-icon"></span>
            Requirements
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/kubernetes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kubernetes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/hardware/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hardware
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../requirements/external-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    External services
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" >
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Clouds
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Clouds
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clouds/aws/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon Web Services (AWS)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../clouds/azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microsoft Azure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4" id="__nav_1_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Single Sign-On
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4">
            <span class="md-nav__icon md-icon"></span>
            Single Sign-On
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../sso/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    About SSO in ODM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_1_4_2" id="__nav_1_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    OpenID
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_4_2">
            <span class="md-nav__icon md-icon"></span>
            OpenID
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Microsoft Azure
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Microsoft Azure
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-odm-application-configuration-in-azuread" class="md-nav__link">
    <span class="md-ellipsis">
      Create ODM application configuration in AzureAD
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-openid-connect-client" class="md-nav__link">
    <span class="md-ellipsis">
      Configure OpenID Connect client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-oauth-resource-server" class="md-nav__link">
    <span class="md-ellipsis">
      Configure OAuth resource server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure OAuth resource server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-about-access-token-version" class="md-nav__link">
    <span class="md-ellipsis">
      Note about access token version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-user-and-group-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      Configure user and group provisioning
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../google/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Workspace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../okta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Okta
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_3" >
        
          
          <label class="md-nav__link" for="__nav_1_4_3" id="__nav_1_4_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SAML
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_3">
            <span class="md-nav__icon md-icon"></span>
            SAML
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../saml/google/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Google Workspace
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../saml/okta/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Okta
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_4_4" >
        
          
          <label class="md-nav__link" for="__nav_1_4_4" id="__nav_1_4_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    SCIM
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_1_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_4_4">
            <span class="md-nav__icon md-icon"></span>
            SCIM
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../scim/azure/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Microsoft Azure
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_5" >
        
          
          <label class="md-nav__link" for="__nav_1_5" id="__nav_1_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Helm
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_5">
            <span class="md-nav__icon md-icon"></span>
            Helm
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../helm/how-to-deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    How to deploy
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_6" >
        
          
          <label class="md-nav__link" for="__nav_1_6" id="__nav_1_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_6">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/aws-s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AWS S3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/azure-sso/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SSO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/azure-scim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Azure SCIM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../troubleshooting/sanity-check/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sanity check
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_7" >
        
          
          <label class="md-nav__link" for="__nav_1_7" id="__nav_1_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1_7">
            <span class="md-nav__icon md-icon"></span>
            Release Notes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../release-notes/v1.50-v1.59/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    v1.50 - v1.59
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-odm-application-configuration-in-azuread" class="md-nav__link">
    <span class="md-ellipsis">
      Create ODM application configuration in AzureAD
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-openid-connect-client" class="md-nav__link">
    <span class="md-ellipsis">
      Configure OpenID Connect client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-oauth-resource-server" class="md-nav__link">
    <span class="md-ellipsis">
      Configure OAuth resource server
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configure OAuth resource server">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#note-about-access-token-version" class="md-nav__link">
    <span class="md-ellipsis">
      Note about access token version
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configure-user-and-group-provisioning" class="md-nav__link">
    <span class="md-ellipsis">
      Configure user and group provisioning
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="azure-ad-setup">Azure AD setup<a class="headerlink" href="#azure-ad-setup" title="Permanent link">&para;</a></h1>
<p>This section explains how to integrate ODM with AzureAD to use AzureAD tenant as OpenID Connect provider, OAuth 2.0 server.</p>
<h2 id="create-odm-application-configuration-in-azuread">Create ODM application configuration in AzureAD<a class="headerlink" href="#create-odm-application-configuration-in-azuread" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Go to <a href="https://portal.azure.com/#blade/Microsoft_AAD_IAM/ActiveDirectoryMenuBlade/RegisteredApps">Azure Portal App Registration</a></p>
</li>
<li>
<p>Navigate to <strong>Enterprise applications –&gt; All applications</strong></p>
</li>
<li>
<p>Press <strong>"New application"</strong> button, then press <strong>"Create your own application"</strong> button</p>
</li>
<li>
<p>Assign the application name, select <strong>"Non-gallery"</strong> application type, and press <strong>"Create"</strong> button</p>
</li>
</ol>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not create the application via <strong>Azure Active Directory –&gt; App registrations</strong>, because applications created that way do not support SCIM user provisioning.</p>
</div>
<h2 id="configure-openid-connect-client">Configure OpenID Connect client<a class="headerlink" href="#configure-openid-connect-client" title="Permanent link">&para;</a></h2>
<ol>
<li>
<p>Navigate to <strong>Azure Active Directory –&gt; App registrations –&gt; <em>{YOUR-APPLICATION}</em></strong></p>
</li>
<li>
<p>Under <strong>"Overview"</strong> menu item:</p>
<ol>
<li>
<p>Copy the <strong>"Application (client) ID"</strong> value. You will need to save this alue as <code>clientId</code> ODM configuration parameter</p>
</li>
<li>
<p>Press <strong>Endpoints</strong> button in toolbar, and copy <strong>OpenID Connect metadata document</strong> URL. It should look like <code>https://login.microsoftonline.com/{tenant}/v2.0/.well-known/openid-configuration</code>.
    You will need to save it as <code>discoveryDocumentUri</code> ODM configuration parameter. Refer to <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/v2-protocols-oidc#fetch-the-openid-connect-metadata-document">Fetch the OpenID Connect metadata document</a> for details about OpenID Connect discovery.</p>
</li>
</ol>
</li>
<li>
<p>Under <strong>"Branding and properties"</strong> menu item, configure <strong>"Home page URL"</strong> (e.g. as <code>https://ODM-HOST</code>) and press <strong>"Save"</strong> button</p>
</li>
<li>
<p>Under <strong>"Authentication"</strong> menu item:</p>
<ol>
<li>
<p>Press <strong>"Add a platform"</strong> button under "Platform configurations" section</p>
<ol>
<li>
<p>Select <strong>"Web"</strong> application type</p>
</li>
<li>
<p>Specify ODM redirect URI, e.g. <code>https://ODM-HOST/frontend/endpoint/microsoft/back</code></p>
</li>
<li>
<p>Press <strong>"Configure"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Disable all tokens for "Implicit grant and hybrid flows"</p>
</li>
<li>
<p>Press <strong>"Save"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Under <strong>"Certificates and secrets"</strong> menu item:</p>
<ol>
<li>
<p>Press <strong>"New client secret"</strong> button under "Client secrets" section, specify the secret description, choose the expiration time, and press <strong>"Add"</strong> button</p>
</li>
<li>
<p>Find the newly added client secret in the table and copy the client secret value (from <strong>"Value"</strong> column). You will need to save this value as <code>clientSecret</code> ODM configuration parameter</p>
</li>
</ol>
</li>
<li>
<p>Under <strong>"API permissions"</strong> menu item:</p>
<ol>
<li>
<p>Press <strong>"Add a permission"</strong> button under "Configured permissions" section</p>
<ol>
<li>
<p>Select <strong>"Microsoft Graph"</strong> application type</p>
</li>
<li>
<p>Select <strong>"Delegated permissions"</strong></p>
</li>
<li>
<p>On the menu <strong>"OpenId permissions"</strong> select: <code>email</code>, <code>openid</code>, <code>profile</code>, <code>offline_access</code></p>
</li>
<li>
<p>Press <strong>"Add permission"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Press <strong>"Grant admin consent for <em>{YOUR ORGANIZATION}</em>"</strong> button under "Configured permissions" section</p>
</li>
</ol>
</li>
</ol>
<div class="admonition attention">
<p class="admonition-title">Attention</p>
<p>You may want to review settings under "Supported account types" and update
them as appropriate for your use case. Do not forget to press the <strong>"Save"</strong> button.</p>
</div>
<div class="admonition tip">
<p>Now you can configure ODM to use AzureID as OpenID Connect provider. You can find configuration examples in the Helm chart.</p>
</div>
<h2 id="configure-oauth-resource-server">Configure OAuth resource server<a class="headerlink" href="#configure-oauth-resource-server" title="Permanent link">&para;</a></h2>
<p>ODM exposes REST APIs which can only be called by other applications. These client applications can use OAuth 2.0 access tokens, issued by Authorization Server, to authorize REST API requests to ODM.</p>
<p>To make it work, you need to establish trust relationships between ODM and AzureAD (it will play the Authorization Server role). You can do this by configuring OpenID Connect integration (see <a href="#configure-openid-connect-client">Configure OpenID Connect client</a> section above).</p>
<p>After that you need to provide AzureAD with necessary information about ODM. Navigate to <strong>Azure Active Directory –&gt; App registrations –&gt; <em>{YOUR-APPLICATION}</em></strong> and do the following:</p>
<ol>
<li>
<p>Set up OAuth scopes for ODM:</p>
<ol>
<li>
<p>Open <strong>"Expose an API"</strong> menu item</p>
</li>
<li>
<p>Set <strong>"Application ID URI"</strong> if it is not set already:</p>
<ol>
<li>
<p>Press the <strong>"Set"</strong> hyperlink to the right of "Application ID URI" label</p>
</li>
<li>
<p>Leave the default "Application ID URI" value which is <code>api://{clientId}</code></p>
</li>
<li>
<p>Press <strong>"Save"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Define a single default scope for ODM REST API clients:</p>
<ol>
<li>
<p>Press <strong>"Add a scope"</strong> button under "Scopes defined by this API" section</p>
</li>
<li>
<p>Set <strong>"Scope name"</strong> to whatever you like, e.g. <code>default</code></p>
</li>
<li>
<p>Set <strong>"Who can consent?"</strong> to "Admins and users"</p>
</li>
<li>
<p>Set <strong>"Admin consent display name"</strong> to "Access user data in ODM"</p>
</li>
<li>
<p>Set <strong>"Admin consent description"</strong> to "Allows the app to read signed-in user's data in ODM"</p>
</li>
<li>
<p>Set <strong>"User consent display name"</strong> to "Access your data in ODM"</p>
</li>
<li>
<p>Set <strong>"User consent description"</strong> to "Allows the app to read your data in ODM"</p>
</li>
<li>
<p>Set <strong>"State"</strong> to "Enabled"</p>
</li>
<li>
<p>Press <strong>"Add scope"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Tell AzureAD which applications should be able to retrieve access tokens from AzureAD to access ODM REST API endpoints:</p>
<ol>
<li>
<p>Press <strong>"Add a client application"</strong> button under "Authorized client applications" section</p>
</li>
<li>
<p>Set <strong>"Client ID"</strong> to the <code>clientId</code> value of the application that will retrieve access tokens from AzureAD to access ODM REST APIs. This client application must have its own App registration in AzureAD where it receives its own <code>clientId</code>, different from the <code>clientId</code> value used to configure ODM</p>
</li>
<li>
<p>Select the <code>api://{clientId}/default</code> scope from the list of scopes under <strong>"Authorized scopes"</strong></p>
</li>
<li>
<p>Press <strong>"Add application"</strong> button</p>
</li>
</ol>
</li>
<li>
<p>Repeat the previous step for every client application in case you have many of them</p>
</li>
</ol>
</li>
<li>
<p>Configure AzureAD to issue to ODM clients Access Tokens version 2 (otherwise access tokens will not be compatible with configuration from OpenID Connect discovery document; see <a href="#note-about-access-token-version">Note about access token version</a> section below):</p>
<ol>
<li>
<p>Open <strong>"Manifest"</strong> menu item</p>
</li>
<li>
<p>Find <code>accessTokenAcceptedVersion</code> parameter in the manifest JSON</p>
</li>
<li>
<p>Set the value of <code>accessTokenAcceptedVersion</code> to <code>2</code></p>
</li>
<li>
<p>Press <strong>"Save"</strong> button</p>
</li>
</ol>
</li>
</ol>
<div class="admonition tip">
<p>Now AzureAD is configured to issue access tokens with the <code>api://{clientId}/default</code> scope to applications that want to access ODM REST APIs using OAuth 2.0 access tokens.</p>
</div>
<h3 id="note-about-access-token-version">Note about access token version<a class="headerlink" href="#note-about-access-token-version" title="Permanent link">&para;</a></h3>
<p>ODM is configured to use version 2 of OpenID Connect protocol implementation in AzureAD, as defined by the discovery document URL: <code>https://login.microsoftonline.com/{tenant}/v2.0/.well-known/openid-configuration?appId={clientId}</code></p>
<p>However, for access tokens AzureAD uses the version 1 format by default, which is incompatible with configuration from v2 OpenID Connect discovery document: <code>iss</code> claim in v1 access token format has values like <code>https://sts.windows.net/{uuid}/</code> while the expected <code>iss</code> claim format in v2 configuration is <code>https://login.microsoftonline.com/{uuid}/v2.0</code>.</p>
<p>Therefore, we need to tell AzureAD explicitly to use v2 format of access tokens, which is currently possible only by changing <code>accessTokenAcceptedVersion</code> parameter in application manifest manually. Refer to <a href="https://docs.microsoft.com/en-us/azure/active-directory/develop/reference-app-manifest#accesstokenacceptedversion-attribute">manifest reference</a> for details.</p>
<h2 id="configure-user-and-group-provisioning">Configure user and group provisioning<a class="headerlink" href="#configure-user-and-group-provisioning" title="Permanent link">&para;</a></h2>
<p>An article about SCIM can be found here <a href="../../scim/azure/">SCIM provisioning</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../sso/" class="md-footer__link md-footer__link--prev" aria-label="Previous: About SSO in ODM">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                About SSO in ODM
              </div>
            </div>
          </a>
        
        
          
          <a href="../google/" class="md-footer__link md-footer__link--next" aria-label="Next: Google Workspace">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Google Workspace
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../../../assets/javascripts/workers/search.07f07601.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../../assets/javascripts/bundle.56dfad97.min.js"></script>
      
    
  </body>
</html>